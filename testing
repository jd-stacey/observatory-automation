def __init__(self, telescope_driver, config_loader, rotator_driver=None, store_last_measurements=False):
    self.telescope_driver = telescope_driver
    self.config_loader = config_loader
    self.last_processed_file = ""
    self.cumulative_zero_time = 0
    self.rotator_driver = rotator_driver
    
    # NEW: Add these fields for acquisition memory
    self.store_last_measurements = store_last_measurements
    if store_last_measurements:
        self.last_total_offset_arcsec = None
        self.last_ra_offset_arcsec = None
        self.last_dec_offset_arcsec = None
        self.last_rotation_offset_deg = None
        self.last_measurement_time = None
    else:
        # Ensure fields exist but are always None for backwards compatibility
        self.last_total_offset_arcsec = None
        self.last_ra_offset_arcsec = None
        self.last_dec_offset_arcsec = None
        self.last_rotation_offset_deg = None
        self.last_measurement_time = None
            
    self.paths_config = config_loader.get_config('paths')
    self.platesolve_config = config_loader.get_config('platesolving')
    
    self.json_file_path = Path(self.paths_config['platesolve_json'])
    
    if rotator_driver:
        logger.info("PlatesolveCorrector initialized with rotator support")
    else:
        logger.info("PlatesolveCorrector initialized without rotator")
