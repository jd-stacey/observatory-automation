    def _check_all_connections(self):
        """Robust connection check using drivers if available, else fallback to HTTP"""
        if not DRIVERS_AVAILABLE:
            self.logger.warning("Drivers not available, falling back to HTTP-only checks")
            return self._check_all_connections_http_fallback()

        # Reset status
        for dev in self.device_status.values():
            dev['connected'] = False
            dev['info'] = {}

        connected_count = 0

        # Telescope
        try:
            self.logger.info("üî≠ Probing telescope...")
            from alpaca_telescope import AlpacaTelescopeDriver
            tel = AlpacaTelescopeDriver()
            if tel.connect(self.device_configs['telescope']) and tel.is_connected():
                name = tel.get_name() or "Unknown Telescope"
                self.logger.info(f"‚úÖ Telescope connected: {name}")
                self.update_status("Telescope", f"Connected - {name}", "green")
                self.device_status['telescope']['connected'] = True
                self.device_status['telescope']['info'] = {'name': name}
                connected_count += 1
            else:
                self.logger.warning("‚ùå Telescope not responding")
                self.update_status("Telescope", "Not Connected", "red")
            tel.disconnect()
        except Exception as e:
            self.logger.error(f"Telescope probe failed: {e}")
            self.update_status("Telescope", "Probe Failed", "red")

        # Rotator
        try:
            self.logger.info("üîÑ Probing rotator...")
            from alpaca_rotator import AlpacaRotatorDriver
            rot = AlpacaRotatorDriver()
            if rot.connect(self.device_configs['rotator']) and rot.is_connected():
                pos = rot.get_position()
                name = rot.get_name() or "Unknown Rotator"
                self.logger.info(f"‚úÖ Rotator connected: {name} at {pos:.1f}¬∞")
                self.update_status("Rotator", f"Connected - {pos:.1f}¬∞", "green")
                self.device_status['rotator']['connected'] = True
                self.device_status['rotator']['info'] = {'name': name, 'position_deg': pos}
                connected_count += 1
            else:
                self.logger.warning("‚ùå Rotator not responding")
                self.update_status("Rotator", "Not Connected", "red")
            rot.disconnect()
        except Exception as e:
            self.logger.error(f"Rotator probe failed: {e}")
            self.update_status("Rotator", "Probe Failed", "red")

        # Cover
        try:
            self.logger.info("üõ°Ô∏è Probing cover...")
            from alpaca_cover import AlpacaCoverDriver
            cov = AlpacaCoverDriver()
            if cov.connect(self.device_configs['cover']) and cov.is_connected():
                state = cov.get_cover_state()
                name = cov.get_name() or "Unknown Cover"
                state_map = {"Closed": "Closed", "Open": "Open", "Moving": "Moving", "Error": "Error"}
                state_name = state_map.get(state, str(state))
                self.logger.info(f"‚úÖ Cover connected: {name} - {state_name}")
                color = "green" if state_name == "Closed" else "orange" if state_name == "Open" else "red"
                self.update_status("Cover", f"Connected - {state_name}", color)
                self.device_status['cover']['connected'] = True
                self.device_status['cover']['info'] = {'name': name, 'cover_state': state_name}
                connected_count += 1
            else:
                self.logger.warning("‚ùå Cover not responding")
                self.update_status("Cover", "Not Connected", "red")
            cov.disconnect()
        except Exception as e:
            self.logger.error(f"Cover probe failed: {e}")
            self.update_status("Cover", "Probe Failed", "red")

        self.logger.info(f"üìä Connection Summary: {connected_count}/3 devices connected")
        if connected_count == 0:
            self.logger.warning("‚ö†Ô∏è No devices responded - check Autoslew and Alpaca services")
        return connected_count

    def _check_all_connections_http_fallback(self):
        """Legacy HTTP-only connection check (fallback if drivers not available)"""
        # This is just your old _check_all_connections_http_only code copy/pasted here.
        # Keep it unchanged as a backup method.
        ...
