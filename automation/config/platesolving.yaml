file_max_age_seconds: 200
check_interval_seconds: 5
correction_scale_factor: 1.0
timeout_seconds: 600

settle_time:
  min: 10
  max: 140

correction_thresholds:
  min_arcsec: 1.0     # dont correct below this
  small_offset: 1.0   
  large_offset: 5.0   

# New: Spectroscopy-specific thresholds for much tighter control
spectro_thresholds:
  min_arcsec: 0.1    # Extremely tight threshold - correct almost any offset
  small_offset: 0.5  # Not used in spectro (always full correction)
  large_offset: 3.0   # Not used in spectro (always full correction)

acquisition:
  enabled: true
  exposure_time: 10.0              # exposure time during acquisition phase
  correction_interval: 2          # checks for correction required between N frames during acquisition
  max_total_offset_arcsec: 3.0    # once total offset <= this number, switch to science frames/folder
  max_attempts:  50              # dont acquire forever and ever and ever and ever and ever
  folder_suffix: "_acq"           

spectro_acquisition:
  enabled: true
  exposure_time: 10.0                    # default initial exposure time (can be overridden using --exposure-time CLI)
  correction_interval: 1                # checks for correction after EVERY frame during acquisition
  max_total_offset_arcsec: -1.0 #1.0          # tighter threshold for spectroscopy fiber alignment - ###MAYBE JUST SET THIS NEGATIVE TO PREVENT ACQ->SCI altogether
  max_attempts: 99999999999999 #45                      # max num of acq frames to take - change this to 1 to bypass acq phase
  default_session_duration_hours: 6.0   # Default hours per imaging session (can be overridden using --duration CLI)
  folder_suffix: "_acq"
  
  # New: Adaptive exposure settings for handling platesolve failures
  max_exposure_time: 120.0              # Maximum exposure time (2 minutes)
  exposure_increase_factor: 2.0         # Multiply exposure by this when platesolve fails
  max_zero_attempts: 8                  # Total retry attempts across all exposure levels
  retries_per_exposure_level: 1         # How many times to try each exposure time
  solver_wait_time: 45.0                # Seconds to wait for solver to process new image #THIS
  

  # In science mode, allow N failures before adaptive exp. time (in case solver is only failing coz clouds or other error not related to brightness)
  # plus we are ostensibly already on target (having moved to science mode)
  science_consecutive_failures_before_adaptive: 8 
  
  
  # New: Faster settle times for spectroscopy
  settle_time:
    min: 1                              # Minimal settle time
    max: 5                              # Much shorter max settle for quick spectro corrections


  # latest spectro pixel positions - 21 Oct 2025
    # 1x1 binning - 4631, 2959
    # 4x4 binning - 1091, 742