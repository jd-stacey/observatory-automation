def ensure_telescope_tracking(telescope_driver, check_interval=0.5):
    import threading
    import time
    
    # Use a threading.Event for clean shutdown signaling
    stop_event = threading.Event()
    
    def tracking_monitor():
        logger = logging.getLogger('tracking_monitor')
        while not stop_event.is_set():
            try:
                if telescope_driver and telescope_driver.is_connected():
                    if hasattr(telescope_driver.telescope, 'Tracking'):
                        if not telescope_driver.telescope.Tracking:
                            logger.warning("Telescope tracking disabled - re-enabling")
                            telescope_driver.telescope.Tracking = True
                            time.sleep(0.5)
                            if telescope_driver.telescope.Tracking:
                                logger.info("Telescope tracking successfully re-enabled")
                            else:
                                logger.error("Failed to re-enable telescope tracking")
                        # else:
                        #     logger.debug("Telescope tracking OK")
                
                # Use stop_event.wait() instead of time.sleep() for responsive shutdown
                if stop_event.wait(timeout=check_interval):
                    break  # stop_event was set, exit cleanly
                    
            except Exception as e:
                logger.error(f"Tracking monitor error: {e}")
                if stop_event.wait(timeout=check_interval):
                    break
    
    tracking_thread = threading.Thread(target=tracking_monitor, daemon=True)
    tracking_thread.start()
    
    # Return both thread and stop_event so caller can shut it down properly
    return tracking_thread, stop_event
