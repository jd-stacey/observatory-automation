def set_current_target(self, target_id: str, base_exposure_time: Optional[float] = None):
    """Set the current target ID to help detect stale platesolve data"""
    if self.current_target_id != target_id:
        self.current_target_id = target_id
        self.target_start_time = time.time()
        # Reset adaptive exposure for new target - THIS IS THE CRITICAL PART
        self.base_exposure_time = base_exposure_time if base_exposure_time is not None else self.spectro_config.get("exposure_time", 30.0)
        self.current_exposure_time = self.base_exposure_time  # Reset to base exposure
        logger.info(f"New spectroscopy target: {target_id}")
        logger.info(f"Reset adaptive exposure time to {self.current_exposure_time:.1f}s for new target")  # Change this from DEBUG to INFO so you can see it
    else:
        # Same target, but update base exposure if provided
        if base_exposure_time is not None and base_exposure_time != self.base_exposure_time:
            self.base_exposure_time = base_exposure_time
            self.current_exposure_time = base_exposure_time
            logger.info(f"Updated base exposure time to {base_exposure_time:.1f}s for target {target_id}")
